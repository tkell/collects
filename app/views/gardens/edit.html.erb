<h1>Update <%= @garden.name %> </h1>

<%= form_with(model: [@collection, @garden]) do |form| %>
  <div>
    <%= form.label :name %><br>
    <%= form.text_field :name %>
  </div>

  Existing:
  <%= form.fields_for :garden_items, @garden.garden_items.reject(&:new_record?) do |garden_item_form| %>
      <div>
        <%= garden_item_form.object.item.title %> - <%= garden_item_form.object.item.artist %>
        <%= garden_item_form.check_box :_destroy %>
        <%= garden_item_form.label :_destroy, 'Remove' %>
      </div>
      <%= garden_item_form.hidden_field :item_id %>
  <% end %>


  Add:
  <div>
    <% (0..10).each do |offset| %>
      <%= form.fields_for :garden_items, GardenItem.new, child_index: Time.now.to_i + offset do |garden_item_form| %>
        <div>
          <%= garden_item_form.label :item_id %>
          <%= garden_item_form.collection_select :item_id, Item.all, :id, :title, prompt: 'Select an item' %>
        </div>
      <% end %>
    <% end %>
  </div>

  <div>
    <%= form.submit %>
  </div>
<% end %>
